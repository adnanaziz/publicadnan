<head>
<title>UTweeter</title>

<link rel="stylesheet type="text/css" href="wmb.css">

<!-- 
use following enum for message type: CREATE, UPDATE, LIKE, UPVOTE, DELETE, QUERY, QUERYBYID, TRENDING 
-->

<script src="jquery.min.js"></script>

<script>
var URLPATH = "http://localhost:16667/queryServlet?queryString=";
</script>

<script>
function likeposting() 
{ alert("likeposting is not implemented"); }
</script>
<script>

function likepostingauthor() 
{ alert("likepostingauthor is not implemented"); }
</script>

<script>
function deleteposting() 
{ alert("deleteposting is not implemented"); }
</script>

<script>
function gettrendingpostings() 
{ alert("gettrendingpostings is not implemented"); }
</script>

<script>
function queryposting() { 
  alert("queryposting is to implemented by student"); 
};
</script>

<script>
function submitposting() 
{
 var jsonreq = {};
 jsonreq["type"] = "CREATE";
 jsonreq["author"] = document.createform.elements["name"].value;
 jsonreq["subject"] = document.createform.elements["subject"].value;
 jsonreq["body"] = document.createform.elements["body"].value;
 jsonreq["latitude"] = document.createform.elements["latitude"].value;
 jsonreq["longitude"] = document.createform.elements["longitude"].value;
 jsonreq["date"] = document.createform.elements["date"].value;
 var jsonreqstring = JSON.stringify(jsonreq);

 $.getJSON(URLPATH + jsonreqstring, 
      function(data) {
       $("#ulpostinglist").children().remove();
       for (var i = 0, len = data.postings.length; i < len && i < 4; i++) {
         $("#ulpostinglist").append('<li>' + data.postings[i].author + ', ' 
                                  + data.postings[i].subject + ', '
                                  + data.postings[i].body + '</li>');
       }
     }
    )
    .error(function() { alert("error in submitposting" ); });
};
</script>

<script>
$(document).ready(function(){
  $("#btntest").click(function(){
    var serverMsg = {
      "id":0,
      "postings":[
          {"id":0,"date":"12/3/2012","latitude":"123.4","longitude":"34.41","body":"A random posting.","subject":"Hello World!","author":"Adnan Aziz","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"12/2/2012","latitude":"123.4","longitude":"34.41","body":"My first posting","subject":"99.97!","author":"Don Bradman","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"11/3/2012","latitude":"123.4","longitude":"34.41","body":"Why do I always lose the big games?","subject":"Number 1","author":"Graham Smith","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"11/2/2012","latitude":"123.4","longitude":"34.41","body":"365 wickets, best in the world","subject":"All rounder!","author":"Ian Botham","authorLikes":939,"postingUpvotes":12},
          {"id":0,"date":"11/2/2012","latitude":"123.4","longitude":"34.41","body":"DSFD FDSF KFD.","subject":"Old timer","author":"Everton Weekes","authorLikes":13,"postingUpvotes":12},
          {"id":0,"date":"11/1/2012","latitude":"123.4","longitude":"34.41","body":"Empty.","subject":"Boring...","author":"Sunny Gavaskar","authorLikes":3443,"postingUpvotes":12}
      ]
    };
    // first clear the list 
    $("#ulpostinglist").children().remove();
    for (var i = 0, len = serverMsg.postings.length; i < len && i < 4; i++) {
      $("#ulpostinglist").append('<li>' + serverMsg.postings[i].author + ', ' 
                                  + serverMsg.postings[i].subject + ', '
                                  + serverMsg.postings[i].body + '</li>');
    }
  });
});
</script>

<!-- TODO(CLEANUP): refactor these repeated calls -->
<script>
$(document).ready(function(){
  $("#btn0").click(function(){
    submitposting();
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn1").click(function(){
    queryposting();
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn2").click(function(){
    deleteposting();
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn3").click(function(){
    likeposting();
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn4").click(function(){
    likepostingauthor();
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn5").click(function(){
    gettrendingpostings();
  });
});
</script>


</head>

<body>
<h2>Welcome to UTweeter!</h2>

<div id="formwrapperdiv">
<table>
<tr>
<td valign="top">
<div id="creatediv">
<h3>Create a posting</h3>
<form name="createform">
<table>
<tr><td>Name</td><td> <input type="text" name="name" value="Default name"></td></tr>
<tr><td>Subject</td><td> <input type="text" name="subject" value="Default value"></td></tr>
<tr><td>Body</td><td> <input type="text" name="body" value="Default body"></td></tr>
<tr><td>Latitude</td><td> <input type="text" name="latitude" value="0.00"></td></tr>
<tr><td>Longitude</td><td> <input type="text" name="longitude" value="0.00"></td></tr>
<tr><td>Date</td><td> <input type="text" name="date" value="13:54:11 11/7/2012"></td></tr>
</table>
</form> 
</div>
</td>

<td valign="top">
<div id="querydiv">
<h3>Query postings</h3>
<form name="queryform">
<table>
<tr> <td>Name</td> <td>  <input type="text" name="name" value="Default name"></tr>
<tr><td>Subject</td> <td>  <input type="text" name="subject" value="Default value"></tr>
<tr><td>Body</td> <td>  <input type="text" name="body" value="Default body"></tr>
<tr><td>Latitude</td> <td>  <input type="text" name="latitude" value="0.00"></tr>
<tr><td>Longitude</td> <td>  <input type="text" name="longitude" value="0.00"></tr>
<tr><td>Distance</td> <td>  <input type="text" name="distance" value="0.00"></tr>
<tr><td>Page size </td> <td> <input type="text" name="pagesize" value="5"></tr>
<tr><td>Page offset</td> <td> <input type="text" name="pageoffset" value="0"></tr>
<tr><td>Start time</td> <td> <input type="text" name="dateStart" value="0"></tr>
<tr><td>End time</td> <td> <input type="text" name="dateEnd" value="0"></tr>
</table>
</form> 
</div>
</td>

<td valign="top">
<div id="updatediv">
<h3>Delete/like/upvote posting</h3>
<form>
<table>
<tr><td> Id of posting </td></tr>
<tr><td><input type="text" name="postingid" value="0"></td></tr>
</table>
</form>
</div>
</td>

<td valign="top">
<div id="actionsdiv">
<h3>Perform actions</h3>
<button id="btn0">Submit posting</button> 
<p>
<button id="btn1">Query postings</button> 
<p>
<button id="btn2">Delete posting</button> 
<p>
<button id="btn3">Like posting</button> 
<p>
<button id="btn4">Like posting author</button> 
<p>
<button id="btn5">Get trending postings</button> 
<p>
<button id="btntest"><em>Test get postings locally</em></button> 
<p>
</div>
</td>
</tr>
</table>
</div>


<div id="postingslist">
<h3>List of postings</h3>
<ul id="ulpostinglist">
</ul>

</div>

<p id="testingarea"></p>

</body>
