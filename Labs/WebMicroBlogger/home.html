<head>
<title> UTweeter home page </title>
<style>
table {
  font: 11px/24px Verdana, Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 400px;
  }

th {
  padding: 0 0.5em;
  text-align: left;
  }

tr.yellow td {
  border-top: 1px solid #FB7A31;
  border-bottom: 1px solid #FB7A31;
  background: #FFC;
  }

td {
  border-bottom: 1px solid #CCC;
  padding: 0 0.5em;
  }

td:first-child { width: 75px; }

td+td {
  border-left: 1px solid #CCC;
  text-align: left;
  width: 275px;
}
</style>


<script src="jquery.min.js"></script>

<script>
function submitposting() 
{
 // alert("document.nameform.firstname:" + document.postingform.elements["firstname"].value);
 //$("#submitresults").html(document.nameform.elements["firstname"].value);
 var jsonreq = {};
 jsonreq["type"] = "CREATE";
 jsonreq["author"] = document.postingform.elements["name"].value;
 jsonreq["subject"] = document.postingform.elements["subject"].value;
 jsonreq["body"] = document.postingform.elements["body"].value;
 jsonreq["latitude"] = document.postingform.elements["latitude"].value;
 jsonreq["longitude"] = document.postingform.elements["longitude"].value;
 // {"type":"CREATE","author":"AdnanAziz1968","id":0,"time":0}
 var jsonreqstring = JSON.stringify(jsonreq);
 alert("jsonreqstring stringified:" + JSON.stringify(jsonreq));

  // change to getJSON for json return case
 var airports = $.getJSON("http://localhost:16667/queryServlet?queryString=" + jsonreqstring, 
      function(data) {
       // alert("success:" + JSON.stringify(data));
       console.log(data);
       var postingList = data.postings;
       //alert("data.postings[0].value = " + data.postings[0].author);
       for ( i = 0 ; i < data.postings.length && i < 4; i++ ) {
         $("#para" + i + "auth").html(postingList[i].author);
         $("#para" + i + "subject").html(postingList[i].subject);
         $("#para" + i + "body").html(postingList[i].body);
         //$("#submitresults").html(data);
       }
     })
    //.success(function() { alert("second success"); })
    .error(function() { alert("error in btnname handler" ); })
    //.complete(function() { alert("complete" + data); })
    ;
};
</script>

<script>
$(document).ready(function(){
  $("#btn1").click(function(){
    $("#para1").html("Hello world!");
    $("#para2").attr("style","color:#FF0000");
  });
});
</script>

<script>
$(document).ready(function(){
  $("#btn3").click(function(){
   // var airports = $.get("http://adnan.appspot.com/autocompleteexample?queryString=d", 
   var airports = $.get("http://localhost:16667/queryServlet?queryString=d", 
      function(data) {
       console.log(data);
       alert("success: " );
       $("#submitresults").html(data);
     })
    .success(function() { alert("second success"); })
    .error(function() { alert("error:" ); })
    .complete(function() { alert("complete" ); });
  });
});
</script>



<script>
$(document).ready(function(){
  $("#btn2").click(function(){
    var serverMsg = {
      "id":0,
      "postings":[
          {"id":0,"date":"12/3/2012","latitude":"123.4","longitude":"34.41","body":"A random posting.","subject":"Hello World!","author":"Adnan Aziz","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"12/2/2012","latitude":"123.4","longitude":"34.41","body":"My first posting.","subject":"99.97!","author":"Don Bradman","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"11/3/2012","latitude":"123.4","longitude":"34.41","body":"Why do I always lose the big games?","subject":"Number 1","author":"Grame Smith","authorLikes":123,"postingUpvotes":12},
          {"id":0,"date":"11/2/2012","latitude":"123.4","longitude":"34.41","body":"365 wickets, best in the world","subject":"All rounder!","author":"Ian Botham","authorLikes":939,"postingUpvotes":12},
          {"id":0,"date":"11/2/2012","latitude":"123.4","longitude":"34.41","body":"DSFD FDSF KFD.","subject":"Old timer","author":"Everton Weekes","authorLikes":13,"postingUpvotes":12},
          {"id":0,"date":"11/1/2012","latitude":"123.4","longitude":"34.41","body":"Empty.","subject":"Boring...","author":"Sunny Gavaskar","authorLikes":3443,"postingUpvotes":12}
      ]
    };
    for (var i = 0, len = serverMsg.postings.length; i < len && i < 4; i++) {
     $("#para" + i + "auth").html(serverMsg.postings[i].author);
     $("#para" + i + "subject").html(serverMsg.postings[i].subject);
     $("#para" + i + "body").html(serverMsg.postings[i].body);
     $("#para" + i + "date").html(serverMsg.postings[i].date);
    }
  });
});
</script>



</head>

<body>

Create a posting
<form name="postingform">
Name <input type="text" name="name"><br>
Subject <input type="text" name="subject"><br>
Body <input type="text" name="body"><br>
Latitude <input type="text" name="latitude"><br>
Longitude <input type="text" name="longitude"><br>
<a href="javascript: submitposting()">Submit</a>
</form> 


<p>
<p id="submitresults"></p>

<button id="btn3">Get postings remotely</button> 

<button id="btn2">Get postings locally</button> 
<p>

<table>
<tr><td id="para0auth"> </td> <td id="para0subject"> </td> <td id="para0body"></td> <td id="para0date"></td> </tr>
<tr><td id="para1auth"> </td> <td id="para1subject"> </td> <td id="para1body"></td> <td id="para1date"></td> </tr>
<tr><td id="para2auth"> </td> <td id="para2subject"> </td> <td id="para2body"></td> <td id="para2date"></td> </tr>
<tr><td id="para3auth"> </td> <td id="para3subject"> </td> <td id="para3body"></td> <td id="para3date"></td> </tr>
</table>



</body>
